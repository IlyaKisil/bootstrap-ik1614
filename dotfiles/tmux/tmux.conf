############################################
###       THIS CONFIG IS SYMLINKED       ###
###    DONT' ENTER ANY SENSITIVE INFO    ###
###                                      ###
###  USE LOCAL CONFIG FOR MODIFICATIONS  ###
### UNLESS CHANGES WILL BECOME PERMANENT ###
############################################


###############################################################################
##################################   NOTES   ##################################
###############################################################################
###
### 1) Almost everything related to changing a layout can be used without prefix
###    and while default shortcut has been disabled. This includes:
###       - Resizing panes ----------------------> (Ctrl-Shift-Arrow)
###       - Switching between panes -------------> (Shift-Arrow)
###       - Switching between windows -----------> (Alt-Arrow)
###       - Cycling through predefined layouts --> (Alt-Shift-Right)
###
### 2) Horizontal and Vertical split is remapped to the corresponding letters and
###    default shortcuts have been disabled
###
### 3) Flag -n indicates that the combo can be used without prefix being send
### 4) Flag -r indicates this key may repeat
###
###############################################################################



###############################################################################
##############################   GENERAL SETUP   ##############################
###############################################################################

### Don't rename windows automatically
set-option -g allow-rename off

### Time for repeating of a hotkey with '-r' flag without having to type the prefix again; default: 500
set-option -g repeat-time 1000

### Start window numbering at 1
set -g base-index 1

### Automatically re-number windows after one of them is closed.
set -g renumber-windows on

### the scrollback history limit to make
set -g history-limit 30000

### Allow use of the mouse with all functionality
set -g mouse on

### Stay in copy mode on mouse drag end. Press Enter to put selection into clipboard
unbind-key -T copy-mode-vi MouseDragEnd1Pane

### Use vim key layout in copy mode
setw -g mode-keys vi

### Don't wrap searches; it's super confusing given tmux's reverse-ordering of position info in copy mode.
set-option -w -g wrap-search off



###############################################################################
################################   SHORTCUTS   ################################
###############################################################################

### Remap prefix from 'C-b' to 'C-Space'
unbind C-b; set -g prefix C-Space

### Remap 'Prefix-Space' to 'Alt-Shift-Right' for cycling through predefined layouts
bind -n M-S-Right next-layout; unbind Space

#### Use 'C-Space' (in prefix mode) for entering copy mode. Unbind default
bind C-Space copy-mode; unbind [

### Vertical and horizontal split using mnemonics and stay in the same location
# with ['v', '|', '\'] and ['h', '-'] (for vertical and horizontal) in prefix mode.
# Unbind default
#bind -r v split-window -h -c "#{pane_current_path}"; unbind '"'
#bind -r h split-window -v -c "#{pane_current_path}"; unbind '%'
bind -r '\' split-window -h -c "#{pane_current_path}"; unbind '"'
bind -r | split-window -h -c "#{pane_current_path}"; unbind '"'
bind -r - split-window -v -c "#{pane_current_path}"; unbind '%'

### Remap 'Prefix-c' to create new window and stay in the same location
unbind c; bind c new-window -c '#{pane_current_path}'

### Resize panes '^-Shift-Arrow' without prefix. Unbind default
bind -n C-S-Up resize-pane -U 2;     unbind M-Up;    unbind C-Up
bind -n C-S-Down resize-pane -D 2;   unbind M-Down;  unbind C-Down
bind -n C-S-Left resize-pane -L 10;  unbind M-Left;  unbind C-Left
bind -n C-S-Right resize-pane -R 10; unbind M-Right; unbind C-Right

### Remap 'Prefix-arrow' to 'Shift-arrow' keys without prefix for switching panes. Unbind default
# TODO: deprecate this?
bind -n S-Up select-pane -U;    unbind Down
bind -n S-Down select-pane -D;  unbind Up
bind -n S-Left select-pane -L;  unbind Left
bind -n S-Right select-pane -R; unbind Right

### Vim-like key bindings for pane navigation (default uses cursor keys).
# Unbinde default. 'l' normally used for last-window
unbind-key h; bind-key h select-pane -L
unbind-key j; bind-key j select-pane -D
unbind-key k; bind-key k select-pane -U
unbind-key l; bind-key l select-pane -R

### Use 'Alt-arrow' to switch windows without prefix. Unbind default
bind -n M-Left  previous-window; unbind p; unbind M-p
bind -n M-Right next-window;     unbind n; unbind M-n

### Faster renaming. No need to first erase the original name.
bind , command-prompt -p "(rename-window '#W')" "rename-window '%%'"
bind '$' command-prompt -p "(rename-session '#S')" "rename-session '%%'"

### Paste into tmux via x clipboard
#bind C-v run "xclip -o | tmux load-buffer - ; tmux paste-buffer" \; display "Pasted from clipboard."

### Copy from tmux buffer into x clipboard for external use
#bind C-c run "tmux save-buffer - | xclip -selection clipboard > /dev/null"  \; display "Copied to clipboard."

### Reload changes in tmux, handy
bind r source-file ~/.tmux.conf \; display "Configuration reloaded."



###############################################################################
########################      LOCAL CONFIGURATION      ########################
###############################################################################
### Any other configurations are considered non-essential, since we don't
### always want to install plugins. Thus, anything else has to be specified
### on per machine basis, i.e. in ~/.tmux-local.conf
source-file ~/.tmux-local.conf

### Modify status bar when in prefix mode. Should stay here, so not to
# depend on configuration for a local theme.
set -g status-left "#{?client_prefix,#[fg=colour39] Prefix mode,} #[fg=colour232,bg=colour39,bold] #S #[fg=colour39,bg=colour240,nobold]#[fg=colour233,bg=colour240] #(whoami) #[fg=colour240,bg=colour235]#[fg=colour240,bg=colour235] #I:#P #[fg=colour235,bg=colour233,nobold]"
